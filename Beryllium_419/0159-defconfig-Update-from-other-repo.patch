From b98bba095851b99c24f11d7bdd7364fcea2fefae Mon Sep 17 00:00:00 2001
From: duckyduckG <duckyduckg65@gmail.com>
Date: Tue, 21 Jan 2025 00:56:04 +0500
Subject: [PATCH 159/175] defconfig: Update from other repo

---
 .../configs/vendor/sdm845-perf_defconfig      | 166 ++++++++++++++----
 .../configs/vendor/xiaomi/beryllium.config    |  41 ++++-
 2 files changed, 169 insertions(+), 38 deletions(-)

diff --git a/arch/arm64/configs/vendor/sdm845-perf_defconfig b/arch/arm64/configs/vendor/sdm845-perf_defconfig
index 05c6c1ed2f77..085dbcd5a3dd 100644
--- a/arch/arm64/configs/vendor/sdm845-perf_defconfig
+++ b/arch/arm64/configs/vendor/sdm845-perf_defconfig
@@ -1,6 +1,7 @@
-CONFIG_LOCALVERSION="-perf"
+CONFIG_LOCALVERSION="-perf+DuckG"
 # CONFIG_LOCALVERSION_AUTO is not set
 CONFIG_NO_HZ=y
+CONFIG_NO_HZ_IDLE=y
 CONFIG_HIGH_RES_TIMERS=y
 CONFIG_PREEMPT=y
 CONFIG_IRQ_TIME_ACCOUNTING=y
@@ -51,6 +52,13 @@ CONFIG_PCI=y
 CONFIG_PCI_MSM=y
 CONFIG_SCHED_MC=y
 CONFIG_NR_CPUS=8
+CONFIG_LITTLE_CPU_MASK=15
+CONFIG_BIG_CPU_MASK=240
+# CONFIG_HZ_100 is not set
+CONFIG_HZ_250=y
+# CONFIG_HZ_1000 is not set
+# CONFIG_HZ_300 is not set
+CONFIG_HZ=250
 CONFIG_SECCOMP=y
 CONFIG_OKL4_GUEST=y
 # CONFIG_UNMAP_KERNEL_AT_EL0 is not set
@@ -62,6 +70,7 @@ CONFIG_SETEND_EMULATION=y
 CONFIG_ARM64_SW_TTBR0_PAN=y
 # CONFIG_ARM64_VHE is not set
 CONFIG_RANDOMIZE_BASE=y
+CONFIG_CMDLINE="ramoops_memreserve=4M"
 # CONFIG_EFI is not set
 CONFIG_BUILD_ARM64_APPENDED_DTB_IMAGE=y
 CONFIG_COMPAT=y
@@ -88,7 +97,7 @@ CONFIG_CRYPTO_GHASH_ARM64_CE=y
 CONFIG_CRYPTO_AES_ARM64_CE_CCM=y
 CONFIG_CRYPTO_AES_ARM64_CE_BLK=y
 CONFIG_CRYPTO_AES_ARM64_NEON_BLK=y
-CONFIG_PANIC_ON_REFCOUNT_ERROR=y
+# CONFIG_PANIC_ON_REFCOUNT_ERROR is not set
 CONFIG_MODULES=y
 CONFIG_MODULE_UNLOAD=y
 CONFIG_MODVERSIONS=y
@@ -99,7 +108,6 @@ CONFIG_BLK_INLINE_ENCRYPTION=y
 CONFIG_BLK_INLINE_ENCRYPTION_FALLBACK=y
 CONFIG_PARTITION_ADVANCED=y
 CONFIG_CFQ_GROUP_IOSCHED=y
-CONFIG_IOSCHED_BFQ=y
 CONFIG_BFQ_GROUP_IOSCHED=y
 # CONFIG_CORE_DUMP_DEFAULT_ELF_HEADERS is not set
 CONFIG_MEMORY_HOTPLUG=y
@@ -116,7 +124,8 @@ CONFIG_PACKET=y
 CONFIG_UNIX=y
 CONFIG_XFRM_USER=y
 CONFIG_XFRM_INTERFACE=y
-CONFIG_XFRM_STATISTICS=y
+# CONFIG_XFRM_STATISTICS is not set
+# CONFIG_NETFILTER_NETLINK_LOG is not set
 CONFIG_NET_KEY=y
 CONFIG_INET=y
 CONFIG_IP_MULTICAST=y
@@ -162,14 +171,14 @@ CONFIG_NETFILTER_XT_TARGET_CONNSECMARK=y
 CONFIG_NETFILTER_XT_TARGET_DSCP=y
 CONFIG_NETFILTER_XT_TARGET_IDLETIMER=y
 CONFIG_NETFILTER_XT_TARGET_HARDIDLETIMER=y
-CONFIG_NETFILTER_XT_TARGET_LOG=y
+# CONFIG_NETFILTER_XT_TARGET_LOG is not set
 CONFIG_NETFILTER_XT_TARGET_MARK=y
-CONFIG_NETFILTER_XT_TARGET_NFLOG=y
+# CONFIG_NETFILTER_XT_TARGET_NFLOG is not set
 CONFIG_NETFILTER_XT_TARGET_NFQUEUE=y
 CONFIG_NETFILTER_XT_TARGET_NOTRACK=y
 CONFIG_NETFILTER_XT_TARGET_TEE=y
 CONFIG_NETFILTER_XT_TARGET_TPROXY=y
-CONFIG_NETFILTER_XT_TARGET_TRACE=y
+# CONFIG_NETFILTER_XT_TARGET_TRACE is not set
 CONFIG_NETFILTER_XT_TARGET_SECMARK=y
 CONFIG_NETFILTER_XT_TARGET_TCPMSS=y
 CONFIG_NETFILTER_XT_MATCH_BPF=y
@@ -288,8 +297,8 @@ CONFIG_SCSI=y
 CONFIG_BLK_DEV_SD=y
 CONFIG_CHR_DEV_SG=y
 CONFIG_CHR_DEV_SCH=y
-CONFIG_SCSI_CONSTANTS=y
-CONFIG_SCSI_LOGGING=y
+# CONFIG_SCSI_CONSTANTS is not set
+# CONFIG_SCSI_LOGGING is not set
 CONFIG_SCSI_SCAN_ASYNC=y
 CONFIG_SCSI_UFSHCD=y
 CONFIG_SCSI_UFSHCD_PLATFORM=y
@@ -341,7 +350,7 @@ CONFIG_INPUT_TOUCHSCREEN=y
 CONFIG_TOUCHSCREEN_FTS=y
 CONFIG_INPUT_MISC=y
 CONFIG_INPUT_QPNP_POWER_ON=y
-CONFIG_INPUT_QTI_HAPTICS=y
+# CONFIG_INPUT_QTI_HAPTICS is not set
 CONFIG_INPUT_UINPUT=y
 # CONFIG_SERIO_SERPORT is not set
 # CONFIG_LEGACY_PTYS is not set
@@ -360,7 +369,7 @@ CONFIG_SPI=y
 CONFIG_SPI_QCOM_GENI=y
 CONFIG_SPI_SPIDEV=y
 CONFIG_SPMI=y
-CONFIG_SPMI_MSM_PMIC_ARB_DEBUG=y
+# CONFIG_SPMI_MSM_PMIC_ARB_DEBUG is not set
 CONFIG_PINCTRL_QCOM_SPMI_PMIC=y
 CONFIG_PINCTRL_SDM845=y
 CONFIG_GPIO_SYSFS=y
@@ -397,11 +406,10 @@ CONFIG_REGULATOR_RPMH=y
 CONFIG_REGULATOR_STUB=y
 CONFIG_MEDIA_SUPPORT=y
 CONFIG_MEDIA_CAMERA_SUPPORT=y
-CONFIG_MEDIA_DIGITAL_TV_SUPPORT=y
 CONFIG_MEDIA_RADIO_SUPPORT=y
 CONFIG_MEDIA_CONTROLLER=y
 CONFIG_VIDEO_V4L2_SUBDEV_API=y
-CONFIG_VIDEO_ADV_DEBUG=y
+# CONFIG_VIDEO_ADV_DEBUG is not set
 CONFIG_VIDEO_FIXED_MINOR_RANGES=y
 CONFIG_MEDIA_USB_SUPPORT=y
 CONFIG_USB_VIDEO_CLASS=y
@@ -549,7 +557,7 @@ CONFIG_QCOM_QMI_POWER_COLLAPSE=y
 CONFIG_QCOM_RPMH=y
 CONFIG_QCOM_SMEM=y
 CONFIG_QCOM_EARLY_RANDOM=y
-CONFIG_QCOM_MEMORY_DUMP_V2=y
+# CONFIG_QCOM_MEMORY_DUMP_V2 is not set
 CONFIG_QCOM_SMP2P=y
 CONFIG_MSM_PIL_MSS_QDSP6V5=y
 CONFIG_SETUP_SSR_NOTIF_TIMEOUTS=y
@@ -563,7 +571,7 @@ CONFIG_MSM_SUBSYSTEM_RESTART=y
 CONFIG_MSM_PIL=y
 CONFIG_MSM_SYSMON_QMI_COMM=y
 CONFIG_MSM_PIL_SSR_GENERIC=y
-CONFIG_MSM_BOOT_STATS=y
+# CONFIG_MSM_BOOT_STATS is not set
 CONFIG_QCOM_DCC_V2=y
 CONFIG_QCOM_EUD=y
 CONFIG_QCOM_MINIDUMP=y
@@ -669,29 +677,33 @@ CONFIG_CRYPTO_DEV_QCRYPTO=y
 CONFIG_CRYPTO_DEV_QCEDEV=y
 CONFIG_CRYPTO_DEV_QCOM_ICE=y
 CONFIG_PRINTK_TIME=y
-CONFIG_DEBUG_INFO=y
+# CONFIG_DEBUG_INFO is not set
 CONFIG_DEBUG_FS=y
 CONFIG_MAGIC_SYSRQ=y
 CONFIG_PANIC_TIMEOUT=5
-CONFIG_SCHEDSTATS=y
+# CONFIG_SCHEDSTATS is not set
 # CONFIG_DEBUG_PREEMPT is not set
-CONFIG_DEBUG_LIST=y
-CONFIG_IPC_LOGGING=y
-CONFIG_DEBUG_ALIGN_RODATA=y
-CONFIG_CORESIGHT=y
-CONFIG_CORESIGHT_LINK_AND_SINK_TMC=y
-CONFIG_CORESIGHT_DYNAMIC_REPLICATOR=y
-CONFIG_CORESIGHT_STM=y
-CONFIG_CORESIGHT_CTI=y
-CONFIG_CORESIGHT_CTI_SAVE_DISABLE=y
-CONFIG_CORESIGHT_TPDA=y
-CONFIG_CORESIGHT_TPDM=y
-CONFIG_CORESIGHT_HWEVENT=y
-CONFIG_CORESIGHT_DUMMY=y
-CONFIG_CORESIGHT_REMOTE_ETM=y
-CONFIG_CORESIGHT_TGU=y
+# CONFIG_DEBUG_LIST is not set
+# CONFIG_IPC_LOGGING is not set
+# CONFIG_DEBUG_ALIGN_RODATA is not set
+# CONFIG_CORESIGHT is not set
+# CONFIG_CORESIGHT_LINK_AND_SINK_TMC is not set
+# CONFIG_CORESIGHT_DYNAMIC_REPLICATOR is not set
+# CONFIG_CORESIGHT_STM is not set
+# CONFIG_CORESIGHT_CTI is not set
+# CONFIG_CORESIGHT_CTI_SAVE_DISABLE is not set
+# CONFIG_CORESIGHT_TPDA is not set
+# CONFIG_CORESIGHT_TPDM is not set
+# CONFIG_CORESIGHT_HWEVENT is not set
+# CONFIG_CORESIGHT_DUMMY is not set
+# CONFIG_CORESIGHT_REMOTE_ETM is not set
+# CONFIG_CORESIGHT_TGU is not set
 CONFIG_SPECTRA_CAMERA=y
 
+# Xiaomi Specific
+CONFIG_TOUCHSCREEN_COMMON=y
+CONFIG_TOUCHSCREEN_XIAOMI_TOUCHFEATURE=y
+
 # zRAM (LZ4)
 CONFIG_ZRAM_DEFAULT_COMP_ALGORITHM="lz4"
 CONFIG_CRYPTO_LZ4=y
@@ -700,3 +712,93 @@ CONFIG_LZ4_DECOMPRESS=y
 
 # exFAT
 CONFIG_EXFAT_FS=y
+
+#
+# IO Schedulers
+#
+CONFIG_IOSCHED_CFQ=y
+CONFIG_IOSCHED_NOOP=y
+# CONFIG_IOSCHED_DEADLINE is not set
+CONFIG_IOSCHED_MAPLE=y
+CONFIG_IOSCHED_BFQ=y
+CONFIG_IOSCHED_SIO=y
+CONFIG_IOSCHED_FIOPS=y
+CONFIG_IOSCHED_ZEN=y
+CONFIG_DEFAULT_CFQ=y
+CONFIG_DEFAULT_IOSCHED="cfq"
+
+#
+# Memory initialization
+#
+# CONFIG_INIT_STACK_ALL_ZERO is not set
+# CONFIG_INIT_ON_ALLOC_DEFAULT_ON is not set
+
+#
+# Kernel Performance Events And Counters
+#
+CONFIG_PERF_EVENTS=y
+
+#
+# ARM errata workarounds via the alternatives framework
+#
+# CONFIG_CAVIUM_ERRATUM_22375 is not set
+# CONFIG_CAVIUM_ERRATUM_23154 is not set
+# CONFIG_CAVIUM_ERRATUM_27456 is not set
+
+#
+# Networking options
+#
+CONFIG_TCP_CONG_ADVANCED=y
+# CONFIG_TCP_CONG_BIC is not set
+CONFIG_TCP_CONG_CUBIC=y
+CONFIG_TCP_CONG_WESTWOOD=y
+# CONFIG_TCP_CONG_HTCP is not set
+# CONFIG_TCP_CONG_HSTCP is not set
+# CONFIG_TCP_CONG_HYBLA is not set
+# CONFIG_TCP_CONG_VEGAS is not set
+# CONFIG_TCP_CONG_NV is not set
+# CONFIG_TCP_CONG_SCALABLE is not set
+# CONFIG_TCP_CONG_LP is not set
+# CONFIG_TCP_CONG_VENO is not set
+# CONFIG_TCP_CONG_YEAH is not set
+# CONFIG_TCP_CONG_ILLINOIS is not set
+# CONFIG_TCP_CONG_DCTCP is not set
+# CONFIG_TCP_CONG_CDG is not set
+CONFIG_TCP_CONG_BBR=y
+CONFIG_DEFAULT_WESTWOOD=y
+# CONFIG_DEFAULT_CUBIC is not set
+# CONFIG_DEFAULT_RENO is not set
+
+#
+# Multimedia core support
+#
+# CONFIG_MEDIA_DIGITAL_TV_SUPPORT is not set
+
+#
+# Scheduler features
+#
+CONFIG_INITRAMFS_IGNORE_SKIP_FLAG=y
+
+#
+# Clock Source drivers
+#
+CONFIG_ARM_ARCH_TIMER_VCT_ACCESS=y
+
+#
+# IEEE 1394 (FireWire) support
+#
+CONFIG_WIREGUARD=y
+
+#
+# Memory Management options
+#
+CONFIG_KSM=y
+
+#
+# RCU Debugging
+#
+CONFIG_DISABLE_TRACE_PRINTK=y
+
+# Others
+CONFIG_FORCE_FAST_CHARGE=y
+CONFIG_CPU_IDLE_GOV_TEO=y
diff --git a/arch/arm64/configs/vendor/xiaomi/beryllium.config b/arch/arm64/configs/vendor/xiaomi/beryllium.config
index c1bdeaedc5b6..6b58763aef13 100644
--- a/arch/arm64/configs/vendor/xiaomi/beryllium.config
+++ b/arch/arm64/configs/vendor/xiaomi/beryllium.config
@@ -2,15 +2,44 @@ CONFIG_MACH_XIAOMI_E10=y
 CONFIG_INPUT_FINGERPRINT=y
 CONFIG_FINGERPRINT_GOODIX_TA=y
 CONFIG_FINGERPRINT_FPC_TEE=y
-CONFIG_SND_SOC_TAS2559=y
+CONFIG_SND_SOC_TAS2559=n
+CONFIG_SND_SOC_TAS2559_MAINLINE=y
 CONFIG_TOUCHSCREEN_FTS_MI=y
 # CONFIG_TOUCHSCREEN_FTS is not set
-CONFIG_TOUCHSCREEN_NT36XXX_LOS=y
-CONFIG_USE_BU64748=y
+CONFIG_TOUCHSCREEN_NT36XXX_MI845=y
+CONFIG_USE_BU64748=n
 CONFIG_LEDS_LM3644=y
-CONFIG_TOUCHSCREEN_XIAOMI_TOUCHFEATURE=y
-CONFIG_TOUCHSCREEN_COMMON=y
 
-# Haptics
+# Beryllium CPU
+# OSM
+CONFIG_CLOCK_CPU_OSM_SDM845=n
+# CPUFREQ_HW
+CONFIG_ARM_QCOM_CPUFREQ_HW=y
+CONFIG_ARM_QCOM_DEVFREQ_FW=y
+CONFIG_LEGACY_ENERGY_MODEL_DT=n
+
+# Beryllium backlight
+CONFIG_BACKLIGHT_QCOM_SPMI_WLED=n
+CONFIG_BACKLIGHT_QCOM_WLED=y
+
+# Haptics Beryllium
 CONFIG_INPUT_QTI_HAPTICS=n
 CONFIG_LEDS_QPNP_HAPTICS=y
+
+# Kprobes
+CONFIG_KPROBES=y
+CONFIG_HAVE_KPROBES=y
+CONFIG_KPROBE_EVENTS=y
+
+# KernelSU_next
+CONFIG_KSU=n
+
+# Susfs
+CONFIG_KSU_SUSFS=n
+CONFIG_KSU_SUSFS_TRY_UMOUNT=n
+CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT=n
+
+#
+# RCU Debugging
+#
+CONFIG_DISABLE_TRACE_PRINTK=n
-- 
2.48.1

